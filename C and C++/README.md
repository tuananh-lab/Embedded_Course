
# COMPILER AND MACRO

==============

## 1. Compiler 
l√† qu√° tr√¨nh bi√™n d·ªãch t·ª´ m√£ ng∆∞·ªùi d√πng sang m√£ m√°y. N√≥ s·∫Ω bao g·ªìm c√°c b∆∞·ªõc Preprocessor, Compilation, Assembler, Linking
- Qu√° tr√¨nh Preprocessor: L√† qu√° tr√¨nh ti·ªÅn x·ª≠ l√Ω s·∫Ω g·ªôp c√°c file source v·ªõi file th∆∞ vi·ªán t∆∞∆°ng ·ª©ng (file.c v√† file.h), v√† x·ª≠ l√Ω c√°c ch·ªâ th·ªã ti·ªÅn x·ª≠ l√Ω nh∆∞ macro v√† x√≥a c√°c command line
                        gcc -E main.c -o main.i
- Qu√° tr√¨nh Compilation: l√† qu√° tr√¨nh bi√™n d·ªãch ch∆∞∆°ng tr√¨nh sang ng√¥n ng·ªØ hay file assembly
                        gcc -S main.i -o main.s
- Qu√° tr√¨nh Assembler: Qu√° tr√¨nh n√†y s·ª≠ d·ª•ng tr√¨nh bi√™n d·ªãch Assembly thay v√¨ Compiler, n√≥ g·ªôp c√°c file.s n·∫øu c√≥ v√† chuy·ªÉn sang file.o file object t∆∞∆°ng ·ª©ng
                        as main.s -o main.o
- Qu√° tr√¨nh Linking: L√† qu√° tr√¨nh ta g·ªôp t·∫•t c·∫£ c√°c file.o v√†o ƒë·ªÉ t·∫°o ra file cu·ªëi c√πng ƒë·ªÉ th·ª±c thi
                        gcc -v -o main main.o //(th√™m c√°c file.o n·ªëi ƒëu√¥i main.o n·∫øu c√≥)

V√≠ d·ª• ch∆∞∆°ng tr√¨nh d∆∞·ªõi ƒë√¢y

**main.c**
```C
#include "func1.h"
int main()
{
    In_Tong(5,6);
}
```

**func1.c**
```C
#include "func1.h"
void In_Tong(int a, int b){
    printf("%d\n",a+b);
}
```
**func1.h**
```C
#ifndef __FUNC_H__

#define __FUNC_H__


#include <stdio.h>

void In_Tong(int a, int b);

#endif
```
- Gi·∫£i th√≠ch: Ch∆∞∆°ng tr√¨nh main s·∫Ω l√† ch∆∞∆°ng tr√¨nh th·ª±c thi , ch∆∞∆°ng tr√¨nh func1.h s·∫Ω l∆∞u c√°c th∆∞ vi·ªán v√† c√°c nguy√™n m·∫´u h√†m c·ªßa ch∆∞∆°ng tr√¨nh func1.c, ch∆∞∆°ng tr√¨nh func1.c s·∫Ω ch∆∞√° c√°c h√†m cung c·∫•p cho ch∆∞∆°ng tr√¨nh kh√°c.
B·∫Øt ƒë·∫ßu v·ªõi qu√° tr√¨nh Processing khi ta s·ª≠ d·ª•ng gcc -E main.c -o main.i trong command line th√¨ file main.i s·∫Ω ƒë∆∞·ª£c t·∫°o ra, n·ªôi dung include func1.h bao g·ªìm c·∫£ c√°c #include trong file func1.h c≈©ng ƒë∆∞·ª£c h·∫øt ra ·ªü file main.i 
**file main.i**
```C
#n·ªôi dung stdio.h
....
....
# 7 "func1.h" 2


# 8 "func1.h"
void In_Tong(int a, int b);
# 2 "main.c" 2


int main()
{
    In_Tong(5,6);
}
```
Ti·∫øp theo l√† qu√° trinhf Compiler ta s·∫Ω s·ª≠ d·ª•ng gcc -S main.i -o main.s ƒë·ªÉ t·∫°o ra 1 file assembly n√≥ s·∫Ω g·∫ßn v·ªõi ng√¥n ng·ªØ m√°y -> m√°y t√≠nh c·ªßa ch√∫ng ta s·∫Ω hi·ªÉu ƒë∆∞·ª£c ng√¥n ng·ªØ ƒë·∫•y, qu√° tr√¨nh n√†y gi√¥ngs nh∆∞ l√† ng∆∞·ªùi phi√™n d·ªãch, l√† c·∫ßu n·ªëi gi·ªØa file.c ng∆∞·ªùi d√πng v√† file.o(file m√£ m√°y). Sau khi th·ª±c thi main.s s·∫Ω c√≥ n·ªôi dung nh∆∞ sau:

**file main.s**
```S
	.file	"main.c"
	.def	___main;	.scl	2;	.type	32;	.endef
	.text
	.globl	_main
	.def	_main;	.scl	2;	.type	32;	.endef
_main:
LFB10:
	.cfi_startproc
	pushl	%ebp
	.cfi_def_cfa_offset 8
	.cfi_offset 5, -8
	movl	%esp, %ebp
	.cfi_def_cfa_register 5
	andl	$-16, %esp
	subl	$16, %esp
	call	___main
	movl	$6, 4(%esp)
	movl	$5, (%esp)
	call	_In_Tong
	movl	$0, %eax
	leave
	.cfi_restore 5
	.cfi_def_cfa 4, 4
	ret
	.cfi_endproc
LFE10:
	.ident	"GCC: (MinGW.org GCC-6.3.0-1) 6.3.0"
	.def	_In_Tong;	.scl	2;	.type	32;	.endef

```
Ti·∫øp theo l√† qu√° tr√¨nh assembler qu√° tr√¨nh n√†y ta s·∫Ω s·ª≠ d·ª•ng tr√¨nh bi√™n d·ªãch c·ªßa ng√¥n ng·ªØ Assembly bi√™n d·ªãch ra m√£ m√°y file.o -> ƒë√¢y l√† m√£ m√† m√°y t√≠nh d√πng ƒë·ªÉ ch·∫°y
as main.s -o main.o. V√¨ ƒë√¢y l√† ng√¥n ng·ªØ c·ªßa m√£ m√°y n√™n cta kh√¥ng hi·ªÉu g√¨ h·∫øt :)) n√™n ƒë·ªÉ ng∆∞·ªùi dungf d·ªÖ hi·ªÉu t·ª´ ƒë√≥ m·ªõi sinh ra c√°c file nh∆∞ file.hex

**file main.o**
```C
    L     ‚Äö       .text           ,   √ú   d           0`.data                               @ 0√Ä.bss                                ‚Ç¨ 0√Ä/4              $                 @ 0@/15             8   ,  x         @ 0@U‚Ä∞√•∆í√§√∞∆í√¨√®    √áD$   √á$   √®    ¬∏    √â√É¬ê¬ê¬êGCC: (MinGW.org GCC-6.3.0-1) 6.3.0         zR |ÀÜ           )    A‚Ä¶B
e√Ö  
                      .file       √æ√ø  gmain.c            _main                            .text          )                .data                            .bss                                           #                     $          8                ___main          _In_Tong         .   .rdata$zzz .eh_frame .rdata$zzz .eh_frame 
```
Ti·∫øp theo l√† qu√° tr√¨nh Linking: Nh∆∞ ta th·∫•y ·ªü 3 ch∆∞∆°ng tr√¨nh v√≠ d·ª• th√¨ file main.c v·∫´n ch∆∞a th·ªÉ ch·∫°y ƒë√∫ng d√π c√≥ ph·∫ßn nguy√™n m·∫´u h√†m c·ªßa ch∆∞∆°ng tr√¨nh fun1.c ·ªü trong file func1.h nh∆∞ng n·ªôi dung c·ªßa h√†m In_Tong() ta v·∫´n ch∆∞a bi·∫øt v√† n√≥ n·∫±m ·ªü trong ch∆∞∆°ng tr√¨nh func1.c. v·∫≠y n√™n ta m·ªõi c·∫ßn qu√° trinhf Linking ƒë·ªÉ li√™n k·∫øt 2 ch∆∞∆°ng tr√¨nh v√†o v·ªõi nhau gcc -v -o main main.c func1.o -> t·∫°o ra file main.exe. ƒê·ªÉ t·∫°o ra file.o nhanh ta c√≥ th·ªÉ s·ª≠ d·ª•ng gcc -c func1.c -o func1.o
**K·∫øt qu·∫£**
```
11
```

## 2. Macro
L√† c√°c ch·ªâ th·ªã ti·ªÅn x·ª≠ l√Ω ƒë∆∞·ª£c x·ª≠ l√≠ trong qu√° tr√¨nh Preprocessor g·ªìm:
- #include -> ƒë·ªÉ th√™m n·ªôi dung c√°c file kh√°c v√†o ch∆∞∆°ng tr√¨nh th∆∞·ªùng l√† c√°c source .h
**V√≠ d·ª•**
```C
    #include <stdio.h>
    #include "test.txt"
    ...
```
- #define -> D√πng ƒë·ªÉ thay th·∫ø n·ªôi dung n√†y th√†nh 1 n·ªôi dung kh√°c m√† m√¨nh ƒë·ªãnh nghƒ©a tr∆∞·ªõc khi ch∆∞∆°ng tr√¨nh bi√™n d·ªãch
**V√≠ d·ª•**
```C
#define a 100
#define Tong_Func(a,b)   \
printf("tong 2 so = %d\n",a+b);
....
```
- #ifdef, #ifndef, #if, #elif, #else -> V·ªõi #if n·∫øu ƒëi·ªÅu ki·ªán if ƒë√∫ng t·ª©c l√† ƒë√£ ƒë∆∞·ª£c define tr∆∞·ªõc ƒë√≥ ƒë√∫ng v·ªõi ƒëi·ªÅu ki·ªán th√¨ m√£ ngu·ªìn d∆∞·ªõi if s·∫Ω ƒë∆∞·ª£c th·ª±c thi, t∆∞∆°ng t·ª± v·ªõi #elif v√† #else. C√≤n v·ªõi #ifdef v√† ifndef -> th√¨ n·∫øu define ƒë·∫•y m√† ch∆∞a ƒë∆∞·ª£c ƒë·ªãnh nghƒ©a th√¨ khi s·∫Ω th·ª±c thi m√£ ngu·ªìn d∆∞·ªõi ifndef. T∆∞∆°ng t·ª± v·ªõi ifdef n·∫øu define ƒë√≥ ƒë∆∞·ª£c ƒë·ªãnh nghƒ©a r·ªìi th√¨ ch·∫°y m√£ l·ªánh b√™n d∆∞·ªõi. C·∫£ 2 g·∫∑p #endif l√† s·∫Ω k·∫øt th√∫c
**V√≠ d·ª• ifdef v√† ifndef**
```C
#include <stdio.h>
#define __FUNC__

#ifdef __FUNC__
    void test(){
        printf("Hello");
    }

#endif

#ifndef __FUNC__
    void test(){
        printf("Hi");
    }

#endif
int main()
{
    test();
}

```
**V√≠ d·ª• #if # elif #else**
```C
#include <stdio.h>
#define DEFINE_1    0
#define DEFINE_2    1
#define DEFINE_3    2
#define CALL_DEFINE DEFINE_1
#if(CALL_DEFINE == DEFINE_1)
    void test(){
        printf("Define 1");
    }
#elif(CALL_DEFINE == DEFINE_2)
    void test(){
        printf("Define 2");
    }
#else
    void test(){
        printf("Define 3");
    }
#endif
int main()
{
    test();
}
```

- Macro kh√¥ng ph·∫£i ki·ªÉu d·ªØ li·ªáu n√†o c·∫£ m√† c≈©ng c√≥ kh√¥ng c√≥ k√≠ch th∆∞·ªõc c·ª• th·ªÉ v√¨ n√≥ x·∫£y ra ·ªü qu√° tr√¨nh ti·ªÅn x·ª≠ l√Ω v√† n√≥ thay th·∫ø c√°i ƒëo·∫°n ƒë∆∞·ª£c ƒë·ªãnh nghƒ©a v√†o

- D√πng macro gi√∫p ch∆∞∆°ng tr√¨nh ch·∫°y nhanh h∆°n nh∆∞ng size c·ªßa ch∆∞∆°ng tr√¨nh s·∫Ω tƒÉng. C√≤n d√πng function n√≥ s·∫Ω x·∫£y ra qu√° tr√¨nh Function Call l√†m ch·∫≠m ch∆∞∆°ng tr√¨nh ƒë·∫∑c bi·ªát v·ªõi funcion ƒë∆∞·ª£c g·ªçi nhi·ªÅu l·∫ßn

- D√πng ## ƒë·ªÉ n·ªëi chuoi trong macro
**V√≠ d·ª•**
```C
#define CREATE_VAR(name, number) \
int int_##name = number; \
char char_##name; \
double double_##name
```
- Va_args ƒë∆∞·ª£c s·ª≠ d·ª•ng khi kh√¥ng x√°c ƒë·ªãnh ƒë∆∞·ª£c tham s·ªë ƒë·∫ßu v√†o trong macro. C·∫•u tr√∫c ƒë∆∞·ª£c vi·∫øt (...) __VA_ARGS__
```C
#define ARRAY(number,...) \
int array(number) = {__VA_ARGS__};
```


# B√ÄI POINTER:

==============

## 1. Kh√°i ni·ªám v·ªÅ Pointer 
- Pointer l√† 1 bi·∫øn ch·ª©a ƒë·ªãa ch·ªâ c·ªßa 1 bi·∫øn kh√°c. Pointer c√≥ k√≠ch th∆∞·ªõc d·ª±a v√†o ki·∫øn tr√∫c m√°y t√≠nh v√† tr√¨nh bi√™n d·ªãch.
VD: V·ªõi ki·∫øn tr√∫c tr√™n m√°y t√≠nh laptop 64bit th√¨ size c·ªßa sizeof(pointer) = 8 byte, t∆∞∆°ng t·ª± v·ªõi ki·∫øn tr√∫c 32bit s·∫Ω l√† 4 byte
```C
    int *ptr_size_1 = NULL;
	double *ptr_size_2 = NULL;
	char * ptr_size_3 = NULL;
	
	printf("size of pointer: %d , %d, %d\n", sizeof(ptr_size_1), sizeof(ptr_size_2), sizeof(ptr_size_3));
	// Phu thuoc vao kien truc may tinh va trinh bien dich
	printf("size of interger: %d\n", sizeof(int));
```
*** K·∫øt qu·∫£: ***
```C
    size of pointer: 4 , 4, 4
    size of interger: 4
```
- Ki·ªÉu d·ªØ li·ªáu khai b√°o bi·∫øn pointer s·∫Ω l√† ki·ªÉu d·ªØ li·ªáu c·ªßa gi√° tr·ªã t·∫°i ƒë·ªãa ch·ªâ ƒëang ƒë∆∞·ª£c tr·ªè t·ªõi.

## 2. C√°c lo·∫°i Pointer
- **Void Pointer**: D√πng ƒë·ªÉ tr·ªè t·ªõi 1 ƒë·ªãa ch·ªâ m√† kh√¥ng c·∫ßn bi·∫øt ki·ªÉu d·ªØ li·ªáu c·ªßa gi√° tr·ªã t·∫°i ƒë·ªãa ch·ªâ ƒë∆∞·ª£c tr·ªè t·ªõi. Nh∆∞ng mu·ªën s·ª≠ d·ª•ng gi√° tr·ªã trong ƒë·ªãa ch·ªâ ƒë√≥ th√¨ ph·∫£i √©p ki·ªÉu v·ªÅ ƒë√∫ng ki·ªÉu d·ªØ li·ªáu c·ªßa gi√° tr·ªã. ƒê∆∞·ª£c s·ª≠ d·ª•ng khi kh√¥ng x√°c ƒë·ªãnh ƒë∆∞·ª£c ki·ªÉu d·ªØ li·ªáu ƒë∆∞·ª£c tr·ªè t·ªõi


**C√°ch khai b√°o:**
```C
    void *ptr_void;
	int value_int = 10;
	char value_char = 'a';
	
	ptr_void = &value_int;
	printf("Con tro void int: %d\n",*(int*)ptr_void); // ep kieu con tro void -> (int*)void
	
	ptr_void = &value_char;
	printf("Con tro void char: %c\n",*(char*)ptr_void);
```
Sau khi √©p ki·ªÉu n√≥ s·∫Ω v·ªÅ ra ƒë√∫ng k·∫øt qu·∫£.

VD: Nh∆∞ trong h√¨nh d∆∞·ªõi ƒë√¢y s·∫Ω l√† 1 function pointer v·ªõi 2 tham s·ªë ƒë·∫ßu v√†o const void * . Con tr·ªè void ƒë∆∞·ª£c s·ª≠ d·ª•ng ·ªü ƒë√¢y v√¨ ta ƒëang kh√¥ng bi·∫øt tham s·ªë ƒë∆∞·ª£c truy·ªÅn v√†o l√† g√¨, ·ªü trong v√≠ d·ª• th√¨ n√≥ ƒëang mu·ªën l·∫•y c√°c gi√° tr·ªã c·ªßa c√°c ph·∫ßn t·ª≠ trong struct m√† ƒë·ªëi v·ªõi struct th√¨ n√≥ s·∫Ω c√≥ nhi·ªÅu ki·ªÉu d·ªØ li·ªáu b√™n trong struct.

```C
void sort(SinhVien array[], size_t size, int (*compareFunc)(const void *, const void *)) {
   int i, j;
   SinhVien temp;
   for (i = 0; i < size-1; i++)   
       for (j = i+1; j < size; j++)
           if (compareFunc(array+i, array+j)>0) {
               temp = array[i];
               array[i] = array[j];
               array[j] = temp;
           }
}
```

- **Function Pointer** : D√πng ƒë·ªÉ tr·ªè t·ªõi 1 h√†m trong ch∆∞∆°ng tr√¨nh. N√≥ th∆∞·ªùng ƒë∆∞·ª£c s·ª≠ d·ª•ng khi ta mu·ªën 1 ho·∫∑c nhi·ªÅu h√†m l√†m tham chi·∫øu c·ªßa 1 h√†m kh√°c -> D√πng ƒë·ªÉ vi·∫øt th∆∞ vi·ªán.
Nh∆∞ v√≠ d·ª• d∆∞·ªõi ƒë√¢y ta c√≥ th·ªÉ th·∫•y s·ª≠ d·ª•ng khai b√°o 1 function pointer ch∆∞a tr·ªè t·ªõi ƒë·ªãa ch·ªâ n√†o c·∫£, v√† n√≥ s·∫Ω tham s√¥s cho h√†m Cal ƒë·ªÉ khi ta mu·ªën tr·ªè t·ªõi h√†m n√†o ch·ªâ c·∫ßn nh·∫≠p h√†m ƒë√≥ v√†o, v√† bi·∫øn function pointer s·∫Ω tr·ªè t·ªõi ƒë·ªãa ch·ªâ c·ªßa h√†m ƒë√≥ v√† th·ª±c thi.

```C
void (*TinhToan)(int, int);
	Cal(Cong,5,6);
	Cal(Tru,5,10);
	Cal(Nhan,5,8);
	Cal(Chia,5,5);
```
```C
/*Function pointer*/
void Cong(int a, int b){
	printf("Tong cua %d va %d = %d\n",a,b,a+b);
}
void Tru(int a, int b){
	printf("Hieu cua %d va %d = %d\n",a,b,a-b);
}
void Nhan(int a, int b){
	printf("Tich cua %d va %d = %d\n",a,b,a*b);
}
void Chia(int a, int b){
	printf("Thuong cua %d va %d = %.2f\n",a,b,(float)a/b);
}
void Cal(void (*TinhToan)(int , int), int a, int b){
	/*Co 2 cach goi func pointer -- (*TinhToan)() -- TinhToan()*/
	printf("Calculate ................\n");
	TinhToan(a,b);
	
}
```

- **Pointer to Constant** :  ƒê·ªãnh nghƒ©a 1 con tr·ªè kh√¥ng th·ªÉ thay ƒë·ªïi gi√° tr·ªã c·ªßa ƒë·ªãa ch·ªâ ƒë∆∞·ª£c tr·ªè ƒë·∫øn. Mu·ªën thay ƒë·ªïi ƒë∆∞·ª£c gi√° tr·ªã ph·∫£i thay ƒë·ªïi ƒë√∫ng c√°i bi·∫øn ch·ª©a gi√° tr·ªã ƒë√≥.
Nh∆∞ trong ƒëo·∫°n code d∆∞·ªõi ƒë√¢y ta khai b√°o 1 bi·∫øn val l∆∞u 1 gi√° tr·ªã 10 v√† 1 con tr·ªè pointer to constant tr·ªè t·ªõi ƒë·ªãa ch·ªâ c·ªßa bi·∫øn val. Nh∆∞ng c√°i kh√°c v·ªõi c√°c bi·∫øn b√¨nh th∆∞·ªùng khi ta truy xu·∫•t t·ªõi gi√° tr·ªã b·∫±ng con tr·ªè *ptr_cons ƒë·ªÉ thay ƒë·ªïi gi√° tr·ªã th√¨ tr√¨nh bi√™n d·ªãch s·∫Ω b√°o l·ªói. Vi·ªác n√†y s·∫Ω ·ª©ng d·ª•ng v√†o vi·ªác ta mu·ªën ƒë∆∞a 1 gi√° tr·ªã v√†o h√†m v√† ch·ªâ cho ph√©p ƒë·ªçc, kh√¥ng cho ph√©p thay ƒë·ªïi gi√° tr·ªã ƒë√≥.

```C
    printf("*******Pointer to Constant **********\n");
	int val_cons = 10;
	int const *ptr_cons = &val_cons; // const int *ptr_cons
	printf("Val of pointer to constant: %d\n", *ptr_cons);
	
	//*ptr_cons = 15; bien nay khong the thay doi gia tri cua dia chi
	val_cons = 20; // su dung bien duoc tro toi de thay doi
	printf("Val of pointer to constant after change: %d\n",*ptr_cons);
```

- **Constant Pointer**: ƒê·ªãnh nghƒ©a 1 con tr·ªè ƒë·ªãa ch·ªâ n√≥ tr·ªè t·ªõi s·∫Ω kh√¥ng th·ªÉ thay ƒë·ªïi. T·ª©c l√† bi·∫øn con tr·ªè n√†y s·∫Ω kh√¥ng th·ªÉ tr·ªè t·ªõi 1 ƒë·ªãa ch·ªâ kh√°c m√† ch·ªâ s·ª≠ d·ª•ng dc 1 ƒë·ªãa ch·ªâ ban ƒë·∫ßu.
Nh∆∞ v√≠ d·ª• d∆∞·ªõi ƒë√¢y khi ta khai b√°o 1 constant pointer v√† cho n√≥ 1 ƒë·ªãa ch·ªâ th√¨ khi n√≥ thay ƒë·ªïi tr√¨nh bi√™n d·ªãch s·∫Ω b√°o l·ªói. ·ª®ng d·ª•ng trong nh√∫ng v√¨ ƒë·ªãa ch·ªâ trong c√°c vi ƒëi·ªÅu khi·ªÉn th∆∞·ªùng ƒë∆∞·ª£c fix c·ª©ng. ƒê·∫∑c bi·ªát nh∆∞ c√°c h√†m ng·∫Øt n√≥ ph·∫£i tr·ªè t·ªõi ƒë√∫ng ƒë·ªãa ch·ªâ c·∫ßn ƒë·∫øn, n·∫øu thay ƒë·ªïi ƒë·ªãa ch·ªâ th√¨ s·∫Ω b·ªã sai ch∆∞∆°ng tr√¨nh

```C
    printf("******Constant Pointer**********\n");
    int cons_val = 50;
	int test_val = 10;
	int *const const_ptr = &cons_val;
	//const_ptr = &test_val; khong the tro toi dia chi khac
```

# B√ÄI C√ÅC BI·∫æN ƒê·∫∂C BI·ªÜT

====================

## 1. Extern
- D√πng extern ƒë·ªÉ l·∫•y 1 bi·∫øn ho·∫∑c 1 h√†m ƒë∆∞·ª£c khai b√°o global c·ªßa ngu·ªìn file kh√°c v√†o ch∆∞∆°ng tr√¨nh hi·ªán t·∫°i c·ªßa m√¨nh ƒë·ªÉ s·ª≠ d·ª•ng
- Gi√∫p cho ch∆∞∆°ng tr√¨nh c√≥ th·ªÉ t√°ch th√†nh c√°c ph·∫ßn nh·ªè ƒë·ªÉ d·ªÖ d√†ng qu·∫£n l√Ω

**Khai b√°o ch∆∞∆°ng tr√¨nh 1**
```C
	#include <stdio.h>

extern int a;
extern void cong(int a, int b);

int main(){
    printf("%d\n",a);
    cong(5,6);
}
```
**Khai b√°o ch∆∞∆°ng tr√¨nh 2**
```C
#include <stdio.h>
int a = 10;

void cong(int a, int b){
    printf("%d", a+b);
}
```
·ªû v√≠ d·ª• n√†y ch∆∞∆°ng tr√¨nh 1 s·∫Ω l·∫•y bi·∫øn a v√† c·∫£ h√†m void cong c·ªßa ch∆∞∆°ng tr√¨nh 2 ƒë·ªÉ d√πng b·∫±ng vi·ªác s·ª≠ d·ª•ng bi·∫øn extern ƒë·ªÉ l·∫•y. ·ª®ng d·ª•ng c·ªßa vi·ªác chia file ƒë·ªÉ m·ªói ch∆∞∆°ng tr√¨nh s·∫Ω c√≥ 1 nhi·ªám v·ª• ri√™ng, v√† bi·∫øn extern khi c·∫ßn thi·∫øt s·∫Ω l·∫•y 1 bi·∫øn ho·∫∑c h√†m trong ch∆∞∆°ng tr√¨nh ri√™ng ƒë√≥ ƒë·ªÉ s·ª≠ d·ª•ng
ƒê·ªÉ ch∆∞∆°ng tr√¨nh t√¨m ƒë∆∞·ª£c bi·∫øn c·ªßa ch∆∞∆°ng tr√¨nh 2 ph·∫£i linking v·ªõi nhau gcc chuongtrinh1 chuongtrinh2 -o main

**K·∫øt qu·∫£**
```C
	10
	11
```

## 2. Static
- **Static local**:
+ S·∫Ω ƒë∆∞·ª£c khai b√°o trong 1 h√†m v√† s·∫Ω ƒë∆∞·ª£c c·∫•p ph√°t ƒë·ªãa ch·ªâ cho bi·∫øn ƒë√≥. Th√¥ng th∆∞·ªùng n·∫øu kh√¥ng s·ª≠ d·ª•ng local static cho bi·∫øn ƒë√≥ n√≥ s·∫Ω ƒë∆∞·ª£c l∆∞u trong v√πng stack v√† khi tho√°t kh·ªèi h√†m s·∫Ω bi·∫øn m·∫•t, c√≤n n·∫øu s·ª≠ d·ª•ng local static n√≥ s·∫Ω t·ªìn t·∫°i trong su·ªët time ch·∫°y ch∆∞∆°ng tr√¨nh v√† c√≥ 1 ƒë·ªãa ch·ªâ c·ª• th·ªÉ ·ªü v√πng bss nh∆∞ng bi√™ns local static ch·ªâ ƒë∆∞·ª£c s·ª≠ d·ª•ng trong h√†m m√† khai b√°o bi·∫øn ƒë√≥. N·∫øu mu·ªën s·ª≠ d·ª•ng bi·∫øn ƒë√≥ b√™n ngo√†i h√†m, ph·∫£i c·∫ßn 1 bi·∫øn con tr·ªè global tr·ªè t·ªõi ƒë·ªãa ch·ªâ c·ªßa local static

**Ch∆∞∆°ng tr√¨nh**
```C
#include <stdio.h>
void tong(){
    /* variable */
    int a = 0;
    a++;
    printf("bien thuong: %d\n",a);
    /* static variable */
    static int c = 0;
    c++;
    printf("bien static: %d\n",c);
}
int main(){
    tong();
    tong();
    tong();
}
```
V√≥i ch∆∞∆°ng tr√¨nh tr√™n ta khai b√°o 1 bi·∫øn local th√¥ng th∆∞·ªùng v√† 1 bi·∫øn local static. Th√¨ khi ra kh·ªèi h√†m k·∫øt qu·∫£ nh·∫≠n ƒë∆∞·ª£c nh∆∞ b√™n d∆∞·ªõi. Th·∫•y r·∫±ng gi√° tr·ªã c·ªßa bi·∫øn th∆∞·ªùng kh√¥ng thay ƒë·ªïi v√¨ m·ªói l·∫ßn v√†o h√†m n√≥ s·∫Ω kh·ªüi t·∫°o l·∫°i v√πng nh·ªõ 1 l·∫ßn n√™n khi dc c·ªông n√™n v·∫´n ch·ªâ = 1. C√≤n ƒë·ªëi v·ªõi bi·∫øn static khi g·ªçi h√†m l·∫ßn ƒë·∫ßu n√≥ ƒë√£ c·∫•p ph√°t cho bi·∫øn ƒë√≥ 1 ƒë·ªãa ch·ªâ c·ªë ƒë·ªãnh n√™n khi ch·∫°y l·∫°i h√†m n√≥ th·∫•y bi·∫øn ƒë√≥ ƒë√£ ƒë∆∞·ª£c kh·ªüi t·∫°o v√† n√≥ ch·ªâ c·∫ßn truy xu·∫•t l·∫•y gi√° tr·ªã th·ª±c thi n√™n n√≥ c√≥ th·ªÉ thay ƒë·ªïi v√¨ n√≥ ƒë√£ c√≥ ƒë·ªãa ch·ªâ tr∆∞·ªõc ƒë√≥. Nh∆∞ng bi·∫øn static int c = 0; ch·ªâ d√πng ƒë∆∞·ª£c trong h√†m n√≥ ƒë∆∞·ª£c khai b√°o, mu·ªën s·ª≠ d·ª•ng n√≥ ph·∫£i c√≥ 1 con tr·ªè tr·ªè t·ªõi n√≥ ƒë·ªÉ l·∫•y ƒë·ªãa ch·ªâ, l√∫c ƒë√≥ m·ªõi mang ra ngo√†i h√†m ƒë·ªÉ s·ª≠ d·ª•ng
**K·∫øt qu·∫£**
```
	bien thuong: 1
	bien static: 1
	bien thuong: 1
	bien static: 2
	bien thuong: 1
	bien static: 3
```

- **Static global**: 
+ N√≥ s·∫Ω ƒë∆∞·ª£c coi nh∆∞ l√† 1 bi·∫øn global th√¥ng th∆∞·ªùng trong file ngu·ªìn hi·ªán t·∫°i, ƒëi·ªÉm kh√°c duy nh·∫•t l√† c√°c file ngu·ªìn kh√°c kh√¥ng th·ªÉ s·ª≠ d·ª•ng extern ƒë·ªÉ l·∫•y bi·∫øn ƒë√≥.
Nh∆∞ v√≠ d·ª• d∆∞·ªõi ƒë√¢y. Nh∆∞ ta th·∫•y ch∆∞∆°ng tr√¨nh 1 extern l·∫•y bi·∫øn a c·ªßa ch∆∞∆°ng tr√¨nh 2. Nh∆∞ng bi·∫øn a c·ªßa ch∆∞∆°ng tr√¨nh 2 l√† bi·∫øn global static n√™n khi extern cho bi·∫øn static n√†y s·∫Ω b·ªã b√°o l·ªói. ·ª®ng d·ª•ng c·ªßa bi·∫øn static s·∫Ω l√† kh√¥ng mu·ªën c√°i bi·∫øn ƒë√≥ ƒë∆∞·ª£c s·ª≠ d·ª•ng ·ªü 1 ch∆∞∆°ng tr√¨nh kh√°c, ƒë·ªÉ b·∫£o v·ªá code.
**Ch∆∞∆°ng tr√¨nh 1**
```C
#include <stdio.h>
extern int a;
extern void cong(int a, int b);
int main(){
    printf("%d\n",a);
    cong(5,6);
}
```
**Ch∆∞∆°ng tr√¨nh 2**
```C
#include 
static int a = 10;
void cong(int a, int b){
    printf("%d", a+b);
}
```
**K·∫øt qu·∫£**
```
C:\Users\ASUS\AppData\Local\Temp\ccugdRGH.o:program_1.c:(.text+0xf): undefined reference to `a'
collect2.exe: error: ld returned 1 exit status
```

## 3. Register
- T·ª´ kh√≥a n√†y ƒë·ªÉ cho ng∆∞·ªùi l·∫≠p tr√¨nh mu·ªën cho 1 bi·∫øn th∆∞·ªùng xuy√™n s·ª≠ d·ª•ng ƒë∆∞·ª£c l∆∞u tr·ªØ trong thanh ghi ƒë·ªÉ s·ª≠ d·ª•ng thay v√¨ bi·∫øn ƒëos ƒë∆∞·ª£c l∆∞u v√πng nh·ªõ RAM -> vi·ªác n√†y l√†m tƒÉng t·ªëc ƒë·ªô x·ª≠ l√Ω c·ªßa bi·∫øn ƒë√≥
Nh∆∞ v√≠ d·ª• d∆∞·ªõi ƒë√¢y n·∫øu ta b·ªè t·ª´ kh√≥a register ·ªü bi·∫øn i ch∆∞∆°ng tr√¨nh s·∫Ω ch·∫°y l√¢u h∆°n so v·ªõi th√™m register, d√π th·ªùi gian kh√¥ng ƒë√°ng k·ªÉ ƒë·ªëi v·ªõi m√°y c·∫•u h√¨nh m·∫°nh nh∆∞ lap. Nh∆∞ng ƒë·ªëi v·ªõi vi ƒëi·ªÅu khi·ªÉn n√≥ c√≥ t·ªëc ƒë·ªô x·ª≠ l√Ω ch·∫≠m, th√¨ vi·ªác s·ª≠ d·ª•ng t·ª´ kh√≥a register h·ª£p l√≠ s·∫Ω gi·∫£m th·ªùi gian chuy·ªÉn ƒë·ªïi c·ªßa bi·∫øn t·ª´ RAM t·ªõi ALU b·∫±ng vi·ªác l∆∞u t·∫°i Register c·ªßa vi ƒëi·ªÅu khi·ªÉn.

**Ch∆∞∆°ng tr√¨nh v√≠ d·ª•**
```C
#include <stdio.h>
#include <time.h>

int main() {
    // L∆∞u th·ªùi ƒëi·ªÉm b·∫Øt ƒë·∫ßu
    clock_t start_time = clock();
    register int i;

    // ƒêo·∫°n m√£ c·ªßa ch∆∞∆°ng tr√¨nh
    for (i = 0; i < 2000000; ++i) {
        // Th·ª±c hi·ªán m·ªôt s·ªë c√¥ng vi·ªác b·∫•t k·ª≥
    }

    // L∆∞u th·ªùi ƒëi·ªÉm k·∫øt th√∫c
    clock_t end_time = clock();

    // T√≠nh th·ªùi gian ch·∫°y b·∫±ng miligi√¢y
    double time_taken = ((double)(end_time - start_time)) / CLOCKS_PER_SEC;

    printf("Thoi gian chay cua chuong trinh: %f giay\n", time_taken);

    return 0;
}

```
**K·∫øt qu·∫£**
```
Tr∆∞·ªõc khi s·ª≠ d·ª•ng t·ª´ kh√≥a Register bi·∫øn i: 0.0003000 gi√¢y
Sau khi s·ª≠ d·ª•ng t·ª´ kh√≥a Register bi·∫øn i: 0.0000000 gi√¢y
```

## 4. Volatile
- T·ª´ kh√≥a n√†y ƒë·ªÉ cho tr√¨nh bi√™n d·ªãch c·ªßa ch∆∞∆°ng tr√¨nh lu√¥n ch·∫°y d√≤ng code ƒë√≥ v√¨ nhi·ªÅu tr√¨nh bi√™n d·ªãch s·∫Ω t·ªëi ∆∞u h√≥a ƒëo·∫°n code l√† ch·ªâ ch·∫°y 1 l·∫ßn -> d·∫´n t·ªõi sai s√≥t trong h·ªá th·ªëng nh√∫ng, v√¨ h·ªá th·ªëng nh√∫ng c√≥ nh·ªØng exception n√™n khi quay v·ªÅ ch∆∞∆°ng tr√¨nh ch√≠nh s·∫Ω ti·∫øp t·ª•c -> c√≥ th·ªÉ g√¢y sai s√≥t. Khi d√πng volatile gi√∫p tr√¨nh bi√™n d·ªãch hi·ªÉu l√† ph·∫£i ch·∫°y d√≤ng code ƒë√≥ l·∫°i.

# B√ÄI GOTO SETJUMP

================

## 1. Goto
- Goto cho ph√©p ch∆∞∆°ng tr√¨nh nh·∫£y t·ª´ l·ªánh goto ƒë·∫øn 1 label ƒë√£ ƒë∆∞·ª£c ƒë·∫∑t tr∆∞·ªõc trong c√πng 1 h√†m.
- S·ª≠ d·ª•ng goto gi√∫p th·ª±c hi·ªán ch∆∞∆°ng tr√¨nh nhanh g·ªçn, nh∆∞ng s·ª≠ d·ª•ng nhi·ªÅu khi·∫øn ch∆∞∆°ng tr√¨nh kh√≥ qu·∫£n l√Ω. N√™n v√¨ v·∫≠y ch·ªâ n√™n d√πng goto v·ªõi nh·ªØng ch∆∞∆°ng tr√¨nh c√≥ nhi·ªÅu v√≤ng l·∫∑p
V√≠ d·ª• v·ªÅ goto: ƒê√¢y l√† ch∆∞∆°ng tr√¨nh ch·∫°y ƒë·∫øn khi l·ªõn h∆°n = 5 th√¨ ch∆∞∆°ng tr√¨nh s·∫Ω k·∫øt th√∫c. ƒê·∫ßu ti√™n n√≥ s·∫Ω ch·∫°y ƒëi qua h√†m if v√¨ l√∫c n√†y i = 0, r·ªìi l√∫c n√†y n√≥ s·∫Ω g·∫∑p l·ªánh goto start, l·ªánh n√†y s·∫Ω g·ªçi ra c√°i label start v√† ch∆∞∆°ng tr√¨nh s·∫Ω nh·∫£y ƒë·∫øn lable v√† ti·∫øp t·ª•c ch∆∞∆°ng tr√¨nh, cho ƒë·∫øn khi i>=5 n√≥ m·ªõi v√†o ƒëi·ªÅu ki·ªán if v√† g·∫∑p goto end ƒë·ªÉ nh·∫£y t·ªõi lable end v√† lable end n√†y n·∫±m ·ªü cu·ªëi ch∆∞∆°ng tr√¨nh, n√≥ s·∫Ω th·ª±c hi·ªán n·ªët c√°c l·ªánh c√≤n l·∫°i v√† k·∫øt th√∫c ch∆∞∆°ng tr√¨nh.
**Ch∆∞∆°ng tr√¨nh**
```C
#include <stdio.h>
int main(){
	int i = 0;
    start: // khi goi goto start se quay ve lable start
    if(i>=5){
        goto end;   
    }
    i++;
    printf("%d\n",i);
    goto start;
    end: // khi goi goto end se quay ve lable start
    printf("Ket thuc %d",i);
}
```

## 2. Setjmp.h
- L√† th∆∞ vi·ªán trong ng√¥n ng·ªØ C. Th∆∞ vi·ªán n√†y cung c·∫•p 2 h√†m setjump v√† longjmp. C√°c h√†m n√†y ƒë·ªÉ x·ª≠ l√Ω ngo·∫°i l·ªá trong C
- N√≥ kh√°c goto ·ªü ch·ªó c√≥ th·ªÉ thay ƒë·ªïi ƒëi·ªÅu ki·ªán gi·ªëng if v√† n√≥ c√≥ th·ªÉ khai b√°o to√†n c·ª•c, trong khi Goto ch·ªâ s·ª≠ d·ª•ng trong c√πng 1 h√†m 
- Th∆∞·ªùng d√πng ƒë·ªÉ b√°o l·ªói trong ch∆∞∆°ng tr√¨nh

Gi·∫£i th√≠ch v√≠ d·ª•: ƒê·ªÉ s·ª≠ d·ª•ng c√°c h√†m setjump v√† longjmp ta ph·∫£i khai b√°o th∆∞ vi·ªán setjump. ƒê·∫ßu ti√™n ta s·∫Ω khai b√°o 1 bi·∫øn jmp_buf buf, ki·ªÉu d·ªØ li·ªáu n√†y ƒë∆∞·ª£c define trong th∆∞ vi·ªán setjmp, n√≥ l√† tham s·ªë ƒë·ªÉ ƒëi·ªÅu ch·ªânh gi√° tr·ªã c·ªßa h√†m setjump(). Khi v√†o ch∆∞∆°ng tr√¨nh th√¨ gi√° tr·ªã c·ªßa h√†m setjmp(buf) s·∫Ω lu√¥n l√† 0, mu·ªën thay ƒë·ªïi gi√° tr·ªã c·ªßa h√†m n√†y ph·∫£i ch·∫°y ƒë·∫øn h√†m longjmp(buf,...) ... ·ªü ƒë√¢y l√† 1 gi√° tr·ªã int n√†o ƒë√≥. V√† l√∫c ƒë√≥ h√†m setjmp s·∫Ω thay ƒë·ªïi gi√° tr·ªã d·ª±a v√†o c√°i longjmp.
V√† nh·ªù vi·ªác bi·∫øn buf l√† bi·∫øn global n√™n v√†o ta c√≥ th·ªÉ t·∫°o ra c√°c ngo·∫°i l·ªá ng·∫Øt ch∆∞∆°ng tr√¨nh. Nh∆∞ trong ch∆∞∆°ng tr√¨nh b√™n d∆∞·ªõi ta s·∫Ω c√≥ 1 ngo·∫°i l·ªá trong h√†m n·∫øu ƒëi·ªÅu ki·ªán ƒë√∫ng n√≥ s·∫Ω tho√°t ra kh·ªèi h√†m nh·∫£y t·ªõi setjmp lu√¥n m√† kh√¥ng ch·∫°y ti·∫øp c·∫£ h√†m ƒë√≥. ·ª®ng d·ª•ng l·ªõn nh·∫•t c·ªßa th∆∞ vi·ªán setjmp.h l√† t·∫°o ra c√°c TRY CATCH THROW nh∆∞ ·ªü trong Java ho·∫∑c Exception trong Python.
**Ch∆∞∆°ng tr√¨nh v√≠ d·ª•**
```C
#include <stdio.h>
#include <setjmp.h>

jmp_buf buf;

double thuong(int a, int b){
    if(b == 0){
        longjmp(buf,1);
    }
    return a/(double)b;
}
int checkArray(int arr[], int size){
    if(size <= 0){
        longjmp(buf,2);
    }
}
int main(){
    int exception_code = setjmp(buf);

    if (exception_code == 0)
    {
        double ketqua = thuong(8,3);
        printf("%f\n",ketqua);

        int array[0];
        checkArray(array,sizeof(array));
    }
    else if(exception_code == 1){
        printf("ERROR! Mau = 0\n");
    }
    else if(exception_code == 2){
        printf("ERROR! Size array <= 0\n");
    }
}
```

# B√ÄI BIT MASK
Bitmask l√† 1 k·ªπ thu·∫≠t trong l·∫≠p tr√¨nh s·ª≠ d·ª•ng c√°c ph√©p to√°n bit nh∆∞ AND OR XOR NOT SHIFT ƒë·ªÉ th·ª±c hi·ªán c√°c tr·∫°ng th√°i nh∆∞ thi·∫øt l·∫≠p, ho·∫∑c x√≥a ho·∫∑c ki·ªÉm tra c√°c bit c·ª• th·ªÉ trong 1 Byte

## To√°n t·ª≠ bitwise
1. AND bitwise (&)
L√† to√°n t·ª≠ th·ª±c hi·ªán ph√©p AND bitwise cho c√°c c·∫∑p bit c·ªßa 2 s·ªë. K·∫øt qu·∫£ l√† 1 n·∫øu 2 bit t∆∞∆°ng ·ª©ng l√† 1, ch·ªâ c·∫ßn 1 bit l√† 0 sau khi th·ª±c hi·ªán AND bitwise s·∫Ω ra 0. Gi·ªëng nh∆∞ vi·ªác nh√¢n 2 bit 
Nh∆∞ v√≠ d·ª• b√™n d∆∞·ªõi k·∫øt qu·∫£ ph√©p AND l√† 100 sau khi AND 125 & 100 , t∆∞∆°ng ·ª©ng s·∫Ω l√† (0111 1101) & (0110 0100) = 110 0100 = 100

2. OR bitwise (|)
L√† to√°n t·ª≠ th·ª±c hi·ªán ph√©p OR bitwise cho c√°c c·∫∑p bit c·ªßa 2 s·ªë. K·∫øt qu·∫£ l√† 1 n·∫øu 1 trong 2 bit OR v·ªõi nhau l√† 1, v√† k·∫øt qu·∫£ l√† 0 khi 2 bit t∆∞∆°ng ·ª©ng ƒë·ªÅu = 0. Gi·ªëng nh∆∞ ph√©p c·ªông gi·ªØa 2 bit
V√≠ d·ª• b√™n d∆∞·ªõi k·∫øt qu·∫£ OR l√† 125 sau khi OR 125 | 100, t∆∞∆°ng ·ª©ng (0111 1101) | (0110 0100) = 0111 1101 = 125

3. XOR bitwise (^)
L√† to√°n t·ª≠ th·ª±c hi·ªán ph√©p XOR bitwise cho c√°c c·∫∑p bit c·ªßa 2 s·ªë. K·∫øt qu·∫£ l√† 1 n·∫øu c·∫∑p bit t∆∞∆°ng ·ª©ng kh√°c nhau, n·∫øu gi·ªëng nhau k·∫øt qu·∫£ l√† 0
V√≠ d·ª• b√™n d∆∞·ªõi k·∫øt qu·∫£ XOR l√† 25 sau khi XOR 125 ^ 100, t∆∞∆°ng ·ª©ng (0111 1101) ^ (0110 0100) = 0001 1001 = 25

4. NOT bitwise(~)
D√πng ƒë·ªÉ th·ª±c hi·ªán ph√©p NOT bitwise tr√™n t·ª´ng bit c·ªßa 1 s·ªë. N√≥ s·∫Ω ƒë·∫£o tr·∫°ng th√°i c·ªßa bit ƒë√≥ n·∫øu bit ƒë√≥ l√† 1 s·∫Ω th√†nh 0, 0 th√†nh 1
V√≠ d·ª• b√™n d∆∞·ªõi ~(125) = 130 t∆∞∆°ng ·ª©ng ~(0111 1101) = (1000 0010) = 130, ~(100) = 155 t∆∞∆°ng ·ª©ng ~(0110 0100) = (1001 1011) = 155

5. Shift left (<<)
ƒê·ªÉ d·ªãch bit sang tr√°i, c√°c bit s·∫Ω d·ªãch sang tr√°i v√† ph·∫ßn b·ªã d·ªãch m·∫•t m√† kh√¥ng c√≥ th√¥ng tin bit tr∆∞·ªõc ƒë√≥ s·∫Ω v·ªÅ 0
V√≠ d·ª• (125) << 2 t∆∞∆°ng ·ª©ng (0111 1101) << 2 = 1111 0100 (244)

6. Shift right (>>)
ƒê·ªÉ d·ªãch bit sang ph·∫£i, c√°c bit s·∫Ω d·ªãch sang ph·∫£i v√† ph·∫ßn b·ªã d·ªãch m·∫•t m√† kh√¥ng c√≥ th√¥ng tin bit tr∆∞·ªõc ƒë√≥ s·∫Ω v·ªÅ 0
V√≠ d·ª• (100) >> 2 t∆∞∆°ng ·ª©ng (0110 0100) >> 2 = 0001 1001 (25)

```C
#include <stdio.h>

#include <stdint.h>

int main(){
    uint8_t number_1 = 125; // 0111 1101
    uint8_t number_2 = 100; // 0110 0100

    // AND
    uint8_t number_and  = number_1 & number_2;
    printf("%d\n", number_and);

    // OR
    uint8_t number_or = number_1 | number_2;
    printf("%d\n", number_or);

    // XOR
    uint8_t number_xor = number_1 ^ number_2;
    printf("%d\n", number_xor);

    // NOT
    uint8_t number_not_1 = ~(number_1);
    uint8_t number_not_2 = ~(number_2);
    printf("%d\n", number_not_1);
    printf("%d\n", number_not_2);

    // SHIFT LEFT 
    uint8_t number_shf_lef = number_1 << 2;
    printf("%d\n", number_shf_lef);

    // SHIFT RIGHT
    uint8_t number_shf_right = number_2 >> 2;
    printf("%d\n", number_shf_right);
}
```
**K·∫øt qu·∫£**
```
100
125
25
130
155
244
25
```
# B√ÄI STRUCT UNION
## 1. STRUCT
- Struct l√† 1 ki·ªÉu c·∫•u tr√∫c d·ªØ li·ªáu do ng∆∞·ªùi l·∫≠p tr√¨nh t·ª± ƒë·ªãnh nghƒ©a b·∫±ng c√°ch nh√≥m c√°c bi·∫øn c√≥ ki·ªÉu d·ªØ li·ªáu kh√°c nhau l·∫°i v·ªõi nhau. Vi·ªác c√≥ ki·ªÉu struct gi√∫p t·∫°o ra 1 th·ª±c th·ªÉ d·ªØ li·ªáu l·ªõn h∆°n v√† ƒë∆∞·ª£c t·ªï ch·ª©c ch·∫∑t ch·∫Ω.
- M·ªói bi·∫øn trong struct g·ªçi l√† 1 th√†nh vi√™n ho·∫∑c tr∆∞·ªùng
VD: Th√¨ x v√† y ·ªü ƒë√¢y l√† th√†nh vi√™n c·ªßa struct Test
```C
struct Test{
    int x;
    int y;
}
```
- K√≠ch th∆∞·ªõc c·ªßa struct s·∫Ω d·ª±a v√†o ki·ªÉu d·ªØ li√™u, k√≠ch th∆∞·ªõc c·ªßa c√°c th√†nh vi√™n v√† ngo√†i ra c√≤n ph·ª• thu·ªôc v√†o Alignment ƒë·ªÉ cƒÉn ch·ªânh t·∫°i c√°c ƒë·ªãa ch·ªâ b·ªô nh·ªõ c·ª• th·ªÉ, align n√†y s·∫Ω d∆∞·∫° v√†o ki·ªÉu d·ªØ li·ªáu l·ªõn nh·∫•t trong struct. ƒê·ªÉ ƒë·∫£m b·∫£o alignment th√¨ kho·∫£ng tr√¥ngs c√≥ th·ªÉ ƒë∆∞·ª£c th√™m v√†o gi·ªØa c√°c th√†nh ph·∫ßn c·ªßa struct. ƒêi·ªÅu n√†y khi·∫øn cho k√≠ch th∆∞·ªõc c·ªßa struct lu√¥n l·ªõn h∆°n n·∫øu nh∆∞ ta t√≠nh theo th√¥ng th∆∞·ªùng
- Nh∆∞ v√≠ d·ª• d∆∞·ªõi ƒë√¢y ta s·∫Ω t√≠nh to√°n k√≠ch th∆∞·ªõc c·ªßa struct. ƒê·∫ßu ti√™n x√°c ƒë·ªãnh ƒë∆∞·ª£c ki·ªÉu d·ªØ li·∫πu l·ªõn nh·∫•t l√† u32 -> aligment s·∫Ω l√† 4 byte 
+ u8 var2[9] -> 9 byte s·∫Ω ƒë∆∞·ª£c s·ª≠ d·ª•ng m√† aligment ·ªü ƒë√¢y l√† 4 byte -> byte cu·ªëi c√πng ph·∫£i th√™m padding ƒë·ªÉ ƒë√∫ng v·ªõi alignment c·ªßa struct-> 8 byte + 1 byte + 3 byte padding
+ uint16_t var1[10] -> ta c√≥ u16 l√† ki·ªÉu d·ªØ li·ªáu chi·∫øm 2 byte -> ph·∫ßn t·ª≠ ƒë·∫ßu ti√™n v·∫´n ƒë·ªß s·ªë byte th√™m v√†o padding -> 9 ph·∫ßn t·ª≠ con l·∫°i v·ªõi ki·ªÉu u16
-> 9 * 2byte = 18 byte nh∆∞ng alignment = 4byte -> s·∫Ω l√† 20 byte -> padding 2 byte -> 18 byte + 2 byte padding
+ uint32_t var3[2] -> u32 l√† ki·ªÉu d·ªØ li·ªáu chi√™ms 4 byte -> ƒë√∫ng alignment -> chi·∫øm 8byte
-> struct frame n√†y c√≥ k√≠ch th∆∞·ªõc l√† 40 byte
**V√≠ d·ª•**
```C
#include <stdio.h>
#include <stdint.h>
typedef struct{
    uint8_t var2[9];
    uint16_t var1[10];
    uint32_t var3[2];

}frame;
int main(){
    printf("%d", sizeof(frame));
}
```
**K·∫øt qu·∫£**
```
    40
```

## 2. Union
- Union c≈©ng l√† 1 ki·ªÉu d·ªØ li·ªáu do ng∆∞·ªùi l·∫≠p tr√¨nh t·ª± ƒë·ªãnh nghƒ©a b·∫±ng c√°ch nh√≥m nhi·ªÅu ki·ªÉu d·ªØ li·ªáu v√†o v·ªõi nhau. Nh∆∞ng kh√°c v·ªõi struct th√¨ c√°c bi·∫øn trong union s·∫Ω chia s·∫ª c√πng 1 v√πng nh·ªõ, t·ª©c l√† c√°c bi·∫øn trong union s·∫Ω c√≥ 1 ƒë·ªãa ch·ªâ gi·ªëng nhau, ƒëi·ªÅu n√†y s·∫Ω gi√∫p ti·∫øt ki·ªám b·ªô nh·ªõ. ƒêi·ªÅu n√†y c≈©ng c√≥ nghƒ©a trong 1 th·ªùi ƒëi·ªÉm ch·ªâ c√≥ 1 th√†nh vi√™n trong union ƒë∆∞·ª£c s·ª≠ d·ª•ng n·∫øu s·ª≠ d·ª•ng nhi·ªÅu h∆°n 1 th√†nh vi√™n c√≥ th·ªÉ b·ªã sai d·ªØ li·ªáu m√¨nh mong mu·ªën. ·ª®ng d·ª•ng c·ªßa union th∆∞·ªùng ·ª©ng d·ª•ng v√†o nh√∫ng, khi m√† trong nh√∫ng ch·ªâ c·∫ßn t√°c ƒë·ªông t·ª´ng bit kh√¥ng c·∫ßn ph·∫£i t√°c ƒë·ªông c·∫£ 1 bi·∫øn byte. Ngo√†i ra ki·ªÉu c·∫•u tr√∫c alingment gi·ªëng nh∆∞ trong struct, nh∆∞ng k√≠ch th∆∞·ªõc s·∫Ω d·ª±a v√†o bi·∫øn c√≥ k√≠ch th∆∞·ªõc  l∆°ns nh·∫•t trong union
- Ta s·∫Ω ph√¢n t√≠ch v√≠ d·ª• b√™n d∆∞·ªõi ƒë·ªÉ hi·ªÉu r√µ c√°ch share v√πng nh·ªõ c·ªßa union. ·ªû union frame var2 c√≥ ki·ªÉu d·ªØ li·ªáu l∆°n nh·∫•t n√≥ s·∫Ω lu√¥n l·∫•y d·ªØ li·ªáu c·ªßa to√†n b·ªô bit t·ª©c l√† 32bit, var1 c√≥ ki·ªÉu d·ªØ li·ªáu l√† u8 n√≥ s·∫Ω ch·ªâ l·∫•y 8bit ƒë·∫ßu, var3 th√¨ c√≥ ki·ªÉu d·ªØ li·ªáu l√† u16 v√† n√≥ l·∫•y 16bit ƒë·∫ßu
+ Ta truy·ªÅn v√†o 1 s·ªë 4668481 t∆∞∆°ng ·ª©ng 0100 0111 0011 1100 0100 0001 l√∫c n√†y bi·∫øn var1 s·∫Ω l·∫•y 8 bit ƒë·∫ßu 0100 0001 = 65, var2 s·∫Ω l·∫•y to√†n b·ªô bit 0100 0111 0011 1100 0100 0001 = 4668481, var3 s·∫Ω l·∫•y 16 bit ƒë·∫ßu 0011 1100 0100 0001 = 15,425

**V√≠ d·ª•**
```C
#include <stdio.h>
#include <stdint.h>

typedef union{ 
    uint8_t  var1; //  0 - 255
    uint32_t var2; //  0 - 4294967295
    uint16_t var3; //  0 - 65535
} frame;

int main(){
    frame data;
    //data.var1 = 5;
    data.var2 = 4668481; // 0100 0111 0011 1100 0100 0001
    //data.var3 = 7;

    printf("Data.var1 = %d\n", data.var1);
    printf("Data.var2 = %u\n", data.var2);
    printf("Data.var3 = %d\n", data.var3);
}
```
**K·∫øt qu·∫£**
```
    Data.var1 = 65
    Data.var2 = 4668481
    Data.var3 = 15425
```

# B√ÄI MEMORY LAYOUT

C√°c file sau qu√° tr√¨nh build processing s·∫Ω t·∫°o ra c√°c file th·ª±c thi nh∆∞ file.exe tr√™n window ho·∫∑c nh∆∞ file.hex tr√™n vi ƒëi·ªÅu khi·ªÉn ƒë·ªÉ l∆∞u v√†o b·ªô nh·ªõ nh∆∞ SSD ho·∫∑c Flash. Sau ƒë√≥ khi ch·∫°y ch∆∞∆°ng tr√¨nh n√≥ s·∫Ω ƒë∆∞·ª£c copy l√™n b·ªô nh·ªõ RAM ƒë·ªÉ th·ª±c thi. T·ª´ ƒë√≥ n√≥ s·∫Ω sinh ra c√°c ph√¢n v√πng nh·ªõ ƒë·ªÉ l∆∞u tr·ªØ c√°c d·ªØ li·ªáu l·∫ßn l∆∞·ª£t bao g·ªìm Text segment, data segment, bss segment, heap segment, stack segment.

## 1. Text Segment
- ƒê√¢y l√† v√πng nh·ªõ ch·ª©a t·∫≠p h·ª£p c√°c l·ªánh th·ª±c thi
- Trong qu√° tr√¨nh ch·∫°y v√πng nh·ªõ n√†y c√≥ quy·ªÅn ƒë·ªçc v√† th·ª±c thi, v√† kh√¥ng c√≥ quy·ªÅn ghi v√†o. V·∫≠y n√™n c√°c bi·∫øn ·ªü trong v√πng text segment ch·ªâ ƒë·ªçc ƒë∆∞·ª£c gi√° tr·ªã m√† kh√¥ng th·ªÉ thay ƒë·ªïi gi√° tr·ªã.
- C√°c bi·∫øn const global hay con tr·ªè ki·ªÉu char s·∫Ω ƒë∆∞·ª£c ghi v√†o v√πng nh·ªõ n√†y. C√≤n v·ªõi bi·∫øn const local th√¨ dc l∆∞u v√†o stack segment.
Nh∆∞ v√≠ d·ª• d∆∞·ªõi ƒë√¢y ta c√≥ th·ªÉ th·∫•y ƒë·ªãa ch·ªâ c·ªßa 2 bi·∫øn n·∫±m c√°ch xa nhau bi·∫øn const global s·∫Ω ƒë∆∞·ª£c l∆∞u ·ªü v√πng text, c√≤n bi·∫øn const local s·∫Ω ƒë∆∞·ª£c l∆∞u ·ªü v√πng stack. ƒê·∫∑c ƒëi·ªÉm chung l√† ƒë·ªÅu kh√¥ng th·ªÉ thay ƒë·ªïi ƒë∆∞·ª£c bi·∫øn const, c√≤n kh√°c nhau ·ªü ch·ªó bi·∫øn const local s·∫Ω b·ªã thu h·ªìi khi ra kh·ªèi h√†m.
```C
#include<stdio.h>
const int a_global = 5; // text
// stack
void test() {
    const int a_local = 10; // stack
    printf("%d\n", &a_local);
}
int main(){
    printf("%d\n", &a_global); 
    test();
}
```
**K·∫øt qu·∫£**
```
    4214884 // vung text
    6422268 // vung stack
```

## 2. Data Segment (Initialized Data Segment)
- ƒê√¢y l√† v√πng d·ªØ li·ªáu ƒë√£ ƒë∆∞·ª£c kh·ªüi t·∫°o, n√≥ s·∫Ω ch·ª©a c√°c bi·∫øn to√†n c·ª•c kh·ªüi t·∫°o gi√° tr·ªã kh√°c 0.
- Ch·ª©a c√°c bi·∫øn Static ƒë∆∞·ª£c kh·ªüi t·∫°o kh√°c 0 c·∫£ c√°c bi·∫øn local v·∫´n global ƒë·ªÅu ƒë∆∞·ª£c l∆∞u chung v√πng nh·ªõ.
- Trong qu√° tr√¨nh ch·∫°y c√≥ th·ªÉ thay ƒë·ªïi ƒë∆∞·ª£c gi√° tr·ªã, c√≥ th·ªÉ ƒë·ªçc v√† khi nh∆∞ b√¨nh th∆∞·ªùng. V√† t·∫•t c·∫£ c√°c bi·∫øn s·∫Ω ƒë∆∞·ª£c thu h·ªìi sau khi k·∫øt th√∫c ch∆∞∆°ng tr√¨nh
·ªû d∆∞·ªõi l√† v√≠ d·ª• v·ªÅ bi·∫øn static global v√† local c√≥ th·ªÉ th·∫•y n√≥ s·∫Ω l∆∞u chung v√πng nh·ªõ v√† 2 bi·∫øn ƒë∆∞·ª£c kh·ªüi t·∫°o kh√°c 0 n√™n s·∫Ω ƒë∆∞·ª£c l∆∞u ·ªü v√πng data. ƒêi·ªÉm kh√°c nhau l√† static local ch·ªâ ƒë∆∞·ª£c s·ª≠ d·ª•ng trong c√°i h√†m ch·ª©a bi·∫øn static local ƒë√≥.
**Ch∆∞∆°ng tr√¨nh v√≠ d·ª•**
```C
#include<stdio.h>
static int static_glo = 6; // data
// stack
void test() {

    static int static_local = 6; // data
    printf("%d\n", &static_local);

}
int main(){
    printf("%d\n", &static_glo);
    test();
}
```
**K·∫øt qu·∫£**
```
    4210692 // v√πng data
    4210696 // v√πng data
```
## 3. Bss Segment (Unitialzed Data Segment)
- ƒê√¢y l√† v√πng d·ªØ li·ªáu ch∆∞a ƒë∆∞·ª£c kh·ªüi t·∫°o, n√≥ s·∫Ω ch·ª©a c√°c bi·∫øn ƒë∆∞·ª£c kh·ªüi t·∫°o = 0, ho·∫∑c ch∆∞a ƒë∆∞·ª£c g·∫Øn gi√° tr·ªã
- Ch·ª©a c√°c bi·∫øn Static ƒë∆∞·ª£c kh·ªüi t·∫°o = 0 ho·∫∑c ch∆∞a ƒë∆∞·ª£c g√°n gi√° tr·ªã
- C√°c bi·∫øn trong v√πng nh·ªõ c√≥ th·ªÉ ƒë·ªçc ghi b√¨nh th∆∞·ªùng. V√† khi k·∫øt th√∫c ch∆∞∆°ng tr√¨nh s·∫Ω thu h·ªìi v√πng nh·ªõ.
**Ch∆∞∆°ng tr√¨nh v√≠ d·ª•**
```C
#include<stdio.h>
static int static_glo ; // bss
// stack
void test() {

    static int static_local; // bss
    printf("%d\n", &static_local);
}
int main(){
    printf("%d\n", &static_glo);
    test();
}
```
**K·∫øt qu·∫£**
```
    4223008 // v√πng bss
    4223012 // v√πng bss
```

## 4. Stack Segment
- ƒê√¢y l√† v√πng s·∫Ω ch·ª©a c√°c bi·∫øn local v√† c√°c tham s·ªë truy·ªÅn v√†o.
- C√≥ th·ªÉ ƒë·ªçc ghi thay ƒë·ªïi gi√° tr·ªã nh∆∞ bthg tr·ª´ c√°c bi·∫øn const. V√† v√πng nh·ªõ s·∫Ω b·ªã thu h·ªìi khi ra kh·ªèi h√†m. Ngo·∫°i l·ªá s·∫Ω c√≥ bi·∫øn static local khi n√≥ ƒë∆∞·ª£c l∆∞u ·ªü v√πng bss ho·∫∑c data.
Nh∆∞ v√≠ d·ª• b√™n d∆∞·ªõi c√≥ th·ªÉ th·∫•y c√°c bi·∫øn ƒë·ªÅu ƒë∆∞·ª£c l∆∞u tr·ªØ trong v√πng stack d√π c√≥ khai b√°o hay kh√¥ng khai b√°o gi√° tr·ªã mi·ªÖn l√† trong h√†m th√¨ ƒë·ªÅu s·∫Ω ƒë∆∞·ª£c l∆∞u ·ªü trong v√πng stack
**Ch∆∞∆°ng tr√¨nh**
```C
#include<stdio.h>
// stack
void test(int c, int d) {
    int e;
    printf("%d\n",&e);
}
int main(){
    int a = 10;
    int b;
    printf("%d\n",&a);
    printf("%d\n",&b);
    test(a,b);
}
```
```
    6422300 \\ stack
    6422296 \\ stack
    6422252 \\ stack
```

## 5. Heap Segment
- V√πng nh·ªõ n√†y l√† v√πng ƒë·ªÉ c·∫•p ph√°t b·ªô nh·ªõ ƒë·ªông trong qu√° tr√¨nh ch·∫°y ch∆∞∆°ng tr√¨nh, ƒë√¢y l√† v√πng nh·ªõ cho ph√©p ng∆∞·ªùi l·∫≠p tr√¨nh t·∫°o ra v√† gi·∫£i ph√≥ng b·ªô nh·ªõ theo √Ω m√¨nh mu·ªën. ƒêi·ªÅu n√†y s·∫Ω gi√∫p cho cta thay ƒë·ªïi t√πy √Ω d·ª±a v√†o d·ªØ li·ªáu trong qu√° tr√¨nh ch·∫°y
- C√≥ quy·ªÅn ƒë·ªçc ghi nh∆∞ b√¨nh th∆∞·ªùng trong qu√° tr√¨nh ch·∫°y. ·ªû trong C s·ª≠ d·ª•ng c√°c h√†m malloc, calloc, realloc, free ƒë·ªÉ t√°c ƒë·ªông v√†o v√πng nh·ªõ HEAP.

# JSON AND LINKED LIST

## JSON
- Kh√°i ni·ªám: JSON (JavaScript Object Notation - ghi ch√∫ v·ªÅ h∆∞·ªõng ƒë·ªëi t∆∞·ª£ng JavaScript) ƒë√¢y l√† 1 ki·ªÉu ƒë·ªãnh d·∫°ng d·ªØ li·ªáu tu√¢n theo 1 quy t·∫Øc nh·∫•t ƒë·ªãnh m√† h·∫ßu h·∫øt c√°c ng√¥n ng·ªØ ƒë·ªÅu c√≥ th·ªÉ ƒëoc ƒë∆∞·ª£c. JSON l√† 1 ti√™u chu·∫©n m·ªü ƒë·ªÉ trao ƒë·ªïi d·ªØ li·ªáu gi·ªØa m√°y t√≠nh v·ªõi web, c≈©ng nh∆∞ gi·ªØa c√°c h·ªá th·ªëng kh√°c nhau.
- JSON s·ª≠ d·ª•ng c√∫ ph√°p d·ª±a tr√™n c·∫∑p: kh√≥a - gi√° tr·ªã (key : value) ƒë·ªÉ s·ª≠ d·ª•ng d·ªØ li·ªáu. Chu·ªói JSON ƒë∆∞·ª£c bao l·∫°i b·ªüi d·∫•u ngo·∫∑c nh·ªçn {}, c√°c key ho·∫∑c value ƒë·ªÅu phair n·∫±m trong d·∫•u ngo·∫∑c k√©p "key". Gi·ªØa c√°c c·∫∑p key-value s·ª≠ d·ª•ng d·∫•u ph·∫©y ƒë·ªÉ ngƒÉn
**VD:**
```C
{
    "name" : "Lam",
    "age" : 30,
    "friend" : "[hoa, mai]",
}
```
## LINKED LIST
- L√† 1 c·∫•u tr√∫c d·ªØ li·ªáu ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ t·ªï ch·ª©c v√† l∆∞u tr·ªØ d·ªØ li·ªáu. M·ªôt linked list bao g·ªìm 1 chu·ªói c√°c node. C√°c node n√†y s·∫Ω l∆∞u tr·ªØ d·ªØ li·ªáu v√† 1 bi·∫øn con tr·ªè, tr·ªè t·ªõi ƒë·ªãa ch·ªâ ti·∫øp theo (ƒë·ªëi v·ªõi Singlely Linked List), ho·∫∑c th√™m 1 bi·∫øn tr·ªè t·ªõi ƒë·ªãa ch·ªâ tr∆∞·ªõc ƒë√≥ (ƒë·ªëi v·ªõi Doubly Linked List). Linked list s·∫Ω cung c·∫•p linh ho·∫°t vi·ªác th√™m, ch√®n, x√≥a c√°c ph·∫ßn t·ª≠ ra kh·ªèi linked list m√† kh√¥ng c·∫ßn ph·∫£i dichj chuy·ªÉn to√†n b·ªô c√°c ph·∫ßn t·ª≠ nh∆∞ trong m·∫£ng.
D∆∞·ªõi ƒë√¢y ta s·∫Ω khai b√°o 1 node cho linked list:
**V√≠ d·ª•**
```C
    typedef struct Node{
        int value;
        Node *next;
    }Node; 
```